# Настройка Telegram бота для уведомлений

Эта инструкция поможет вам настроить Telegram бота для получения уведомлений из админ-панели.

## Шаг 1: Создание Telegram бота

1. Откройте Telegram и найдите бота [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям и укажите имя и username для вашего бота
4. BotFather предоставит вам **токен бота** (например: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)
5. Сохраните этот токен - он понадобится позже

## Шаг 2: Получение Chat ID

Есть несколько способов получить Chat ID:

### Способ 1: Через бота @userinfobot
1. Найдите бота [@userinfobot](https://t.me/userinfobot) в Telegram
2. Отправьте ему любое сообщение
3. Бот вернет ваш Chat ID (число, например: `123456789`)

### Способ 2: Через API Telegram
1. Отправьте любое сообщение вашему боту
2. Откройте в браузере:
   ```
   https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
   ```
   Замените `<YOUR_BOT_TOKEN>` на токен, полученный от BotFather
3. Найдите в ответе поле `"chat":{"id":123456789}` - это ваш Chat ID

### Способ 3: Через группу (для групповых уведомлений)
1. Добавьте бота в группу
2. Сделайте бота администратором группы
3. Используйте способ 2, но вместо личного Chat ID используйте ID группы (будет отрицательным числом)

## Шаг 3: Настройка переменных окружения

1. Создайте файл `.env` в корне проекта (если его еще нет)
2. Добавьте следующие переменные:

```env
VITE_TELEGRAM_BOT_TOKEN=ваш_токен_бота
VITE_TELEGRAM_CHAT_ID=ваш_chat_id
```

**Важно:**
- Не коммитьте файл `.env` в Git (он уже должен быть в `.gitignore`)
- Для продакшена настройте эти переменные в настройках вашего хостинга

## Шаг 4: Проверка работы

1. Запустите приложение: `npm run dev`
2. Войдите в админ-панель
3. Выполните любое действие, которое вызывает уведомление (например, обновите статус заказа)
4. Проверьте, что уведомление появилось в Telegram

## Что будет отправляться в Telegram?

В Telegram будут дублироваться следующие уведомления из админ-панели:

- ✅ Успешные операции:
  - Обновление статуса заказа
  - Добавление/обновление/удаление товара
  - Добавление/удаление фото в галерею
  - Загрузка изображений

- ❌ Ошибки:
  - Ошибки загрузки данных
  - Ошибки сохранения
  - Ошибки удаления
  - Ошибки загрузки изображений

## Отключение уведомлений

Если вы хотите временно отключить отправку в Telegram, просто удалите или закомментируйте переменные окружения в `.env`:

```env
# VITE_TELEGRAM_BOT_TOKEN=ваш_токен_бота
# VITE_TELEGRAM_CHAT_ID=ваш_chat_id
```

Приложение продолжит работать, но уведомления не будут отправляться в Telegram.

## Безопасность

⚠️ **Важно:** 
- Никогда не публикуйте токен бота в открытом доступе
- Не коммитьте файл `.env` в Git
- Используйте разные боты для разработки и продакшена
- Регулярно проверяйте, кто имеет доступ к вашему боту

## Устранение неполадок

### Уведомления не приходят

1. Проверьте, что переменные окружения установлены правильно
2. Убедитесь, что токен бота корректен
3. Проверьте, что Chat ID правильный
4. Откройте консоль браузера (F12) и проверьте наличие ошибок
5. Убедитесь, что вы отправили хотя бы одно сообщение боту (для личных чатов)

### Ошибка "Unauthorized"

- Проверьте правильность токена бота
- Убедитесь, что бот не был удален или заблокирован

### Ошибка "Chat not found"

- Проверьте правильность Chat ID
- Убедитесь, что вы отправили сообщение боту
- Для групп: убедитесь, что бот добавлен в группу и является администратором

